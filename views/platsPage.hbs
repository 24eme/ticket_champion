{{> header}}

<section class="d-flex justify-content-center">
    <h2 class="text-center texte-intro">Bonjour {{employee}}, que veux-tu manger ?</h2>


<div class="row container-card">
  {{#each data.data.restaurants.[0].plats}}
  <div class="col-sm-2 card-plats">
    <div class="card">
      <img class="card-img-top" src={{this.img}} alt="image du plat">
      <div class="card-body">
        <h5 class="card-title">{{this.nom}} - {{this.prix}}€</h5>
        <p class="liste-ingredients">{{this.ingredients}}</p>
        <button type="button" class="btn btn-primary bouton-plats" title="{{this.prix}}" id="{{this.nom}}" >Ajouter a la commande</button>
      </div>
    </div>
  </div>
   {{/each}} 
</div>

<div class="row container-prev-next d-flex justify-content-around">
<button class="btn btn-primary btn-previous col-sm-2" onclick="window.location = '/plats'">Précédent</button>
<button class="btn btn-primary btn-next col-sm-2" onclick="window.location.href = '/heureLivraison';" style="margin-left: 10px;">Suivant</button>
</div>

</section>

            <script>
 
  const allButton = document.querySelectorAll('.B1');
  allButton.forEach(button => {
  button.addEventListener('click', (event) => {
  const buttonText = event.target.id;
  const prix = event.target.title;
  const xhr = new XMLHttpRequest();
    xhr.open('POST', '/plats');
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.send(JSON.stringify({ buttonText, prix }));


});
    
  });
</script>

{{> footer}}

