{{> header}}

<section>
    <h2 class="text-center texte-intro">Bonjour {{employee}}, que veux-tu manger ?</h2>
    <div class="container plat-parent">
        <div class="plat-enfant">
            <ul> {{#each data.data.restaurants.[0].plats}}
                <img class="image-de-plat" src={{this.img}} alt="image du plat">
                <h4 class="text-center nom-du-plat">{{this.nom}} - {{this.prix}}€</h4>
                <span class="liste-ingredients">{{this.ingredients}}</span>
                <li> <button type="button" class="btn btn-primary btn-lg B1 bouton-ajout" title="{{this.prix}}" id="{{this.nom}}" >Ajouter a la commande</button></li>
            {{/each}}
            </ul>
        </div>
    </div>
  <a href='/clients1'>
    <input type="submit" class="btn btn-primary btn-previous" value="Précédent"/>
  </a>
  <a href='/supplements'>
    <input type="submit" class="btn btn-primary btn-next" value="Suivant"/>
  </a>
</section>

            <script>

  const allButton = document.querySelectorAll('.B1');
  allButton.forEach(button => {
  button.addEventListener('click', (event) => {
  const buttonText = event.target.id;
  const prix = event.target.title;
  const xhr = new XMLHttpRequest();
    xhr.open('POST', '/plats');
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.send(JSON.stringify({ buttonText, prix }));


});
    
  });
</script>

{{> footer}}

