{{> header}}

<style>
    .time-item.disabled {
        background-color: grey;
        cursor: not-allowed;
    }
</style>

<section style="align-items: center;">
    <h2 class="text-center texte-intro">A quelle heure souhaites-tu récupérer ta commande ? ⏰</h2>
    <div class="container row text-center">
        <div class="sauver" id="" style="width: 160px;">
            <ul>
                <li class="btn btn-primary time-item m-bottom-20" data-value="12h00" style="border-radius: 15px;">12h00</li>
                <li class="btn btn-primary time-item m-bottom-20" data-value="12h30" style="border-radius: 15px;">12h30</li>
                <li class="btn btn-primary time-item m-bottom-20" data-value="13h00" style="border-radius: 15px;">13h00</li>
                <li class="btn btn-primary time-item m-bottom-20" data-value="13h30" style="border-radius: 15px;">13h30</li>
                <li class="btn btn-primary time-item m-bottom-20" data-value="14h00" style="border-radius: 15px;">14h00</li>
            </ul>
        </div>

        <div class="gif-container">
            <img class="cook-gif" src="/assets/images/cook.gif" style="border-radius: 15px;">
        </div>

        <div class="restaurant-container">
            <div>
                <a href='/confirmation'>
                    <input type="submit" class="btn btn-primary btn-lg btn-valider m-bottom-70" value="Valider" style="border-radius: 15px;"disabled/>
                </a>
            </div>
        </div>
    </div>
</section>

<script>
    const allButton = document.querySelectorAll('.time-item');
    const boutonValider = document.querySelector('.btn-valider');

    allButton.forEach(button => {
        button.addEventListener('click', (event) => {
            // Désactiver tous les boutons
            allButton.forEach(btn => {
                btn.classList.remove('disabled');
            });

            // Récupérer le bouton cliqué
            const currentButton = event.target;

            // Désactiver le bouton cliqué
            currentButton.classList.add('disabled');

            // Activer le bouton de validation
            boutonValider.disabled = false;

            // Envoyer la valeur du bouton au serveur
            const xhr = new XMLHttpRequest();
            xhr.open('POST', '/heurelivraison');
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send(JSON.stringify({ buttonText: currentButton.dataset.value }));
        });
    });

</script>

{{> footer}}
